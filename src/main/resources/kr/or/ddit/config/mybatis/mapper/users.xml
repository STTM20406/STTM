<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">

<!-- ******************* users ******************* -->

<!-- 특정한 일반 사용자 조회 -->
<select id="getUser" parameterType="string" resultType="userVo">
	select *
	from users
	where user_email = #{user_email}
</select>

<!-- 일반 사용자 등록 -->
<insert id="insertUser" parameterType="userVo">
	insert into users(user_email,user_pass,user_nm,user_hp,user_right,user_st)
	values (#{user_email},#{user_pass},#{user_nm},#{user_hp},'U','N')
</insert>

<!-- 일반 사용자 삭제 -->
<delete id="deleteUser" parameterType="string">
	delete users where user_email = #{user_email}
</delete>

<!-- 일반 사용자 비밀번호 수정 -->
<update id="updateUserPass" parameterType="userVo">
	update users 
	set user_pass = #{user_pass}
	where user_email = #{user_email}	 
</update>

<!-- 일반 사용자 알림 설정 -->
<insert id="insertUserNotice" parameterType="notification_setVo">
	insert into notification_set 
	values (not_set_seq.nextval, #{user_email}, #{not_cd}, 'N')
</insert>	

<!-- 휴면 계정 설정 -->
<update id="updateUserStatus" parameterType="userVo">
	update users
	set user_st = 'Y'
	where user_email = #{user_email}
</update>

<!-- 일반 사용자 프로필 업데이트 -->
<update id="updateUserProfile" parameterType="userVo">
	update users
	set user_nm = #{user_nm}, user_hp = #{user_hp}
	where user_email = #{user_email}
</update>

<!-- 휴면 계정으로 전환하기 위하여 나의 프로젝트 멤버 
	  리스트에서 프로젝트 소유권이 'N'인 멤버를 조회 -->
<select id="getMyProjectMemList" parameterType="int" resultType="project_memVo">
	select * 
	from project_mem
	where prj_id = #{prj_id};
</select>


<!-- ******************* mail_confirm ******************* -->


</mapper>